.macro debug_macro
    bl reg_push
.endm

// push all registers (r0-r15 and CPSR) to stack
reg_push:

	stmfd sp!, {r1}
	ldr r1, =macro_reg_space

	stmia r1!, {r0}
	mov r0, r1
	ldmfd sp!, {r1}

	stmia r0!, {r1-r15}

	mrs r1, cpsr
	stmia r0!, {r1}

    // return to original routine
    mov pc, lr

// pop register from stack one by one
reg_pop_one:

// print register to tera-term through Tx FIFO
print:

macro_reg_space:	.space 1024
