.macro uart_print

	bleq uart_trans_init

.endm

//////////////////////////////////////////////
//		reference error : clean project		//
//////////////////////////////////////////////

#include "uart_regs.h"

uart_trans_init:

	ldr r0, =uart_TX_RX_FIFO0
	ldr r1, =uart_Channel_sts_reg0

	ldr r2, =timer_space
	ldr r3, [r2]
	add r3, r3, #1
	str r3, [r2]

TRANSMIT_loop:

	// check to see if the Tx FIFO is empty
	ldr r3, [r1]
	and r3, r3, #0x8
	cmp r3, #0x8
	bne TRANSMIT_loop

	ldr r4, [r2], #1
	str r4, [r0]			// fill the Tx FIFO
	cmp r4, #0x00
	bne TRANSMIT_loop

	mov pc, lr

.timer_space:
	.word 0
	.word 0x00
